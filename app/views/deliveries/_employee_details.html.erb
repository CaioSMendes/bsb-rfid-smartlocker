<div id="employee_details">
  <h4>Funcionário encontrado</h4>
  <p><strong>Nome:</strong> <%= @employee.name %></p>
  <p><strong>Email:</strong> <%= @employee.email %></p>
  <p><strong>Telefone:</strong> <%= @employee.phone %></p>

  <!-- Aqui você pode adicionar qualquer outro campo que você desejar exibir -->

  <%= form_with model: @delivery, url: deliveries_path, method: :post, local: true do |f| %>
    <%= f.hidden_field :employee_id, value: @employee.id %>

    <div class="form-group">
      <%= f.label :package_details, "Detalhes do Pacote" %>
      <%= f.text_area :package_details, class: "form-control", placeholder: "Digite detalhes do pacote" %>
    </div>

    <div class="form-group">
      <%= f.label :locker_number, "Número do Locker" %>
      <%= f.text_field :locker_number, class: "form-control", placeholder: "Número do locker" %>
    </div>

    <%= f.submit "Confirmar Entrega", class: "btn btn-success" %>
  <% end %>
</div>


<script>
$(document).ready(function() {
  $("#verify_employee").click(function(event) {
    event.preventDefault(); // Evita envio padrão do formulário

    $.ajax({
      url: "<%= search_employee_by_phone_or_email_deliveries_path %>",
      method: "POST",
      data: { query: $("#employee_search").val() },
      success: function(data) {
        // Insere o conteúdo retornado pela requisição no passo 2 do formulário
        $("#step2").html(data);  
        $("#step1").hide();
        $("#step2").show();
      },
      error: function() {
        $("#employee_error").text("Funcionário não encontrado.").show();
      }
    });
  });
});
</script>